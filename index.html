---
layout: default
title: Linked Interactive Small Multiples
---

<h1>Linked Interactive Small Multiples</h1>

<p>Small multiples should be a familiar visualization technique for most FlowingData readers. The key idea is to slice up your data and use a separate chart to visualize each slice. The end result is a grid of charts that all follow the same visual format, but show different pieces of the data. A chorus of little stories that can help tell a bigger one.</p>

<p>While the concept is simple, the benefits can be significant. Compared to a single larger chart, small multiples can help with <a href="http://www.perceptualedge.com/articles/visual_business_intelligence/over-plotting_in_graphs.pdf">overplotting</a> (which is when some data is obscured or occluded because there are too many things being plotted). Compared to animation, small multiples present all of the data at once which makes it easier for viewers to naturally compare each facet with others instead of trying to flip back and forth between views.</p>

<p>FlowingData has covered small multiples and their uses many times over. We have used R to make <a href="http://flowingdata.com/2013/04/29/small-multiples-in-r/">small multiple bar charts</a> and <a href="http://flowingdata.com/2013/07/08/small-maps-and-grids/">gridded maps</a>. We have even seen an <a href="http://flowingdata.com/2012/01/05/build-interactive-time-series-charts-with-filters/">implementation of area charts</a> that used D3 and provided some interactive capabilities in the form of filtering (which I'll get back to).</p>

<p><span class="tip">Tufte and Few have written pages and pages on small multiples - so I can write another tutorial, right?</span>
But even with this content around small multiples, a visualization as versatile as this has plenty more to give.</p>

<p>In this tutorial we are going to take another look at interactive small multiples and explore more possibilities available when we bring this visual to the web.</p>

<p>Specially, I'd like to talk about <strong>linked</strong> small multiples. Here, all the plots in the small multiple are linked and interact together in some way.</p>

<p>Before we get started with our own, it might be valuable to look at some successful examples of linked small multiples out there to get a sense for what kind of interactions are possible, and how they are getting used.</p>

<h2>Linked Small Multiple Examples</h2>

<p>I've broken down the domain of linked small multiples into four types of interactions. Mostly, this just allows me to make up silly names for the interactions (which probably already have real names anyways), but it helps frame the conversation a bit.</p>

<p>
<span class="tip">And if you have a better name for one or more of these categories from the vis or UI/UX world, please let me know!</span>
There are five broad categories of linked small multiple interactions that we will look at. The visualizations can be:

<ol>
  <li>Updateable</li>
  <li>Reorderable</li>
  <li>Highlightable</li>
  <li>Scrubbable</li>
</ol>
</p>

<p>To clarify a bit, we are focusing on interactions that affect all or many of the small multiple plots at the same time, so tooltips don't count. But if you are interested in small multiples that are interactive at the individual chart level, check out my <a href="http://vallandingham.me/small_multiples_with_details.html">small multiples with details on demand</a> tutorial for one such example.</p>

<h3>Updateable</h3>

<p>This is a common approach where the data is filtered or processed in some way and then the small multiples are updated to reflect this new data. The FlowingData visualization <a href="http://projects.flowingdata.com/timeuse/">How Americans Spend Their Day</a>, that served as the demo for the last D3 small multiples tutorial, is updateable. The filters update the plots with different subsets of the data to provide a greater exploration experience.</p>

<img src="img/timeuse.png">

<p>Another Great example of an updateable small multiple is part of a <a href="http://githut.info/">GitHut</a>, a visualization of programming language popularity on Github.</p> 

<img src="img/githut.png">

<p>Here, you can toggle between repository count and percent of total for each language, providing both absolute and relative metrics to compare.</p>

<h3>Reorderable</h3>

<p>With reorderable small multiples, interactions cause the positions of the individual plots to move. Sorting in different ways allows the viewer pick out different patterns in the data.</p>

<img src="img/kepler.png">

<p>Still one of my favorite interactive small multiples, <a href="http://13pt.com/">Jonathan Corum's</a> always updating <a href="">Kepler's Tally of Planets</a> allows the viewer to reorder by discovery date or system size. This gives the viewer a historical perspective, as well as one that highlights the incredible diversity in the systems.</p>

<h3>Highlightable</h3>

<p>Here, part or all of the visualization is highlighted to bring a visual element to the forefront for comparison, or connect the plots in some way.</p>

<p>In the Upshot's <a href="http://www.nytimes.com/2014/04/23/upshot/the-american-middle-class-is-no-longer-the-worlds-richest.html?abt=0002&abg=1">look at the American middle class</a>, they provide a wonderful small multiple to compare the US with other countries. You can mouse over one of the lines to highlight that country's data in each of the plots.</p>

<img src="img/middle_class.png">

<p>And recently, the Financial Times has provided an interesting twist on this idea in their <a href="http://blogs.ft.com/ftdata/2014/08/29/eu-unemployment-tracker/">EU unemployment tracker</a>.

<img src="img/eu_tracker.png"/>

<p>They show sets of small multiples for different metrics for each country, ordered by greatest to least for that metric. While this may break the purist form of small multiples, they also make the plots highlightable where that country's data is highlighted for each metric. With this format, you can easily read it worst to best (in terms of unemployment), but then also highlight a specific country. Nice!</p>

<h3>Scrubbable</h3>

<p>Now we're cooking with fire! Or at least interesting interactions. Scrubbable small multiples display the values of individual data points. You've seen this before in line charts and bar charts, but with a scrubbable small multiple, you get values in all your plots.</p>

<img src="img/tax_burden.png"/>

<p>I first saw this in 2012 in the New York Times piece about <a href="http://www.nytimes.com/interactive/2012/11/30/us/tax-burden.html">America's Tax Burden</a>, but now it's everywhere.</p>

<p>Propublica's <a href="https://projects.propublica.org/graphics/ambulances">ambulance payout expos√©</a> uses this technique and was praised for it by <a href="http://junkcharts.typepad.com/junk_charts/2014/07/a-small-step-for-interactivity.html">Junk Chart's Kaiser Fung</a> (and that's high praise).</p>

<img src="img/ambulance.png"/>

<p>And most recently, scrubbable small multiples were used to help explain the <a href="http://www.nytimes.com/interactive/2014/09/14/sunday-review/unplanned-pregnancies.html?smid=tw-share">inefficiencies of birth control methods</a>. The visual provides great within-plot comparisons, as well as between-plot comparisons with this approach.</p>

<img src="img/birth_control.png"/>

<h3>Bonus: Brushable</h3>

<p>
<span class="tip">I'm sure I missed more types of interactions. Have one and want to tell me? Just email it to me or write it in the comments.</span>
I did find a demonstration from Mike Bostock of a scrubbable + highlightable interaction where points in a small multiples of scatter plots were <a href="http://bl.ocks.org/mbostock/4063663">selectable in two dimensions</a>. However, while this type of 'brushable' interaction would certainly be useful in some situations, so far I haven't found it used in the wild.</p>

<h2>Our Own Scrubbable Highlightable Reorderable Small Multiple</h2>

<p>Ok, enough examples, let's get coding.</p>

<p>Many of these interactions could be used together to make even more interesting interactions, and that's what we are going to try in this tutorial. Let's start with a basic small multiples built in <a href="http://d3js.org/">D3.js</a> and then add in some of these interactions to see how they work.</p>

<p>You can <a href="">download the code</a> and follow along as we build up the visualization. It is again written in <a href="">CoffeeScript</a>, but I've also compiled it into straight JavaScript and saved that off - in case you don't want to give CoffeeScript a try.</p>

<p>If you have python installed (and if you are on a Mac or Linux box, you should have python by default), you can open up the code directory in your Terminal and run python's simple http server.</p>

<p>First, you are going to want to check the python version you have:</p>

<pre>
  [sourcecode language="bash"]
  python --version
  [/sourcecode]
  <br />
</pre>

<p>If it is <strong>python 2.x</strong>, you can run the web server with the command:</p>
<pre>
  [sourcecode language="bash"]
  # start web server with python 2
  python -m SimpleHTTPServer
  [/sourcecode]
  <br />
</pre>
<p>If it is <strong>python 3.x</strong>, the syntax is a bit different:</p>
<pre>
  [sourcecode language="bash"]
  # start web server with python 3
  python -m http.server
  [/sourcecode]
  <br />
</pre>

<p>Once you have the server running in the code's directory, you should be able to open up <a href="http://0.0.0.0:8000">http://0.0.0.0:8000</a> in your web browser and see the visualization.</p>

<p>
<span class="tip">If anyone has problems on Windows getting started, let me know.</span>
If you are on a Windows machine, I'm terribly sorry for you. But, Jerome Cukier should have you covered with his <a href="http://www.jeromecukier.net/blog/2012/09/04/getting-to-hello-world-with-d3/">Getting to Hello World with d3</a> post.</p>

<h3>The Data</h3>

<h3>Loading the Data</h3>

<p>Ok, first the easiest part of any D3 project: loading the data. Well, the loading part is easy, but some times getting it into the format you want after you load it can be a bit of a pain.</p>

<p></p>

<p></p>

<p>The binding methodology of </p>

[sourcecode language="javascript"]
something <- function()
blah blah blah
yabba = dabba + 1
oink poink
return poo
[/sourcecode]
<br />

625px wide
